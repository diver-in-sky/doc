





<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>1.1.2. Submodule box.space</title>
    <link rel="icon" type="image/png" sizes="192x192"
          href="/theme/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="/theme/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"
          href="/theme/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="/theme/favicon/favicon-16x16.png">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:       '',
        VERSION:        '1.7.1',
        COLLAPSE_INDEX:  false,
        FILE_SUFFIX:    '.html',
        HAS_SOURCE:      true
      };
      
      
      var disqus_config = function () {
          // Replace PAGE_URL with your page's canonical URL variable
          // this.page.url = PAGE_URL;
          this.page.identifier = "book/box/box_space";
          this.language = "en"
      };
    </script>
    <script id="dsq-count-scr" src="https://tarantooldb.disqus.com/count.js" async/></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/headers.js"></script>
    <script type="text/javascript" src="../../_static/jquery.sticky-kit.min.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>
    <script type="text/javascript" src="/js/mobile_menu.js"></script>
    <link rel="stylesheet" href="/theme/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/design.css">
    <link rel="stylesheet" href="/theme/pygmentize.css">
    <link rel="stylesheet" href="../../_static/sphinx_design.css">
     
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


  </head>
  
  <body class="p-cols_design b-doc-book/box/box_space">
  
    <div class="b-wrapper">
      <!-- HEADER > -->
      
  <header class="b-header">
    <div class="b-header_menu_mobile">
      <div class="b-burger-button">
        <span></span>
      </div>
      <form role="search" class="b-header-search" action="../../search.html" method="get">
        <input name="q" type="search">
      </form>
    </div>
    <div class="b-menu_mobile">
      <div class="b-menu_mobile__wrapper">
        <nav class="b-header_menu">
          
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

        </nav>
      </div>
      
    </div>
    <div class="b-header-wrapper">
      <nav class="b-header_menu">
        
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      </nav>
    </div>
  </header>

      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
    <div class="b-block-wrapper">
      <h2
      
        class="b-section-title b-ellipsis toggle-navigation"
      
        title="1.1.2. Submodule box.space">
          1.1.2. Submodule box.space
      </h2>
  <div class="b-doc-language_selector">
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="#" class="b-doc-language_selector-item-url p-active"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../ru/book/box/box_space.html
  
"
           class="b-doc-language_selector-item-url"> Ru </a>
      
      </li>
    
    </ul>
  </div>
</div>
  </section>
  
    <div class="b-cols_content b-clearbox">
      <div class="b-cols_content_left">
        <div class="b-menu-toc">
          
<form id="searchbox" role="search" class="search b-search" action="../../search.html" method="get">
  <input class="b-search-text" name="q" type="text"/ placeholder="Search the manual">
  <input class="b-search-but" type="submit" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#an-application-server-together-with-a-database-manager">An application server together with a database manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#database-features">Database features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/lua_tutorials.html">1. Lua tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/lua_tutorials.html#insert-one-million-tuples-with-a-lua-stored-procedure">1.1. Insert one million tuples with a Lua stored procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#configure">1.1.1. Configure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#delimiter">1.1.2. Delimiter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#create-a-function-that-returns-a-string">1.1.3. Create a function that returns a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#create-a-function-that-calls-another-function-and-sets-a-variable">1.1.4. Create a function that calls another function and sets a variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-the-function-so-it-returns-a-one-letter-random-string">1.1.5. Modify the function so it returns a one-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-the-function-so-it-returns-a-ten-letter-random-string">1.1.6. Modify the function so it returns a ten-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#make-a-tuple-out-of-a-number-and-a-string">1.1.7. Make a tuple out of a number and a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-main-function-to-insert-a-tuple-into-the-database">1.1.8. Modify main_function to insert a tuple into the database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-main-function-to-insert-a-million-tuples-into-the-database">1.1.9. Modify main_function to insert a million tuples into the database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/lua_tutorials.html#tutorial-sum-a-json-field-for-all-tuples">1.2. Tutorial: Sum a JSON field for all tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/lua_tutorials.html#indexed-pattern-search">1.3. Indexed pattern search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/c_tutorial.html">2. C tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/c_tutorial.html#c-stored-procedures">2.1. C stored procedures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">User's Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html">1. Preface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro.html#how-to-read-the-documentation">1.1. How to read the documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro.html#getting-in-touch-with-the-tarantool-community">1.2. Getting in touch with the Tarantool community</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide_getting_started.html">2. Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_guide_getting_started.html#downloading-and-installing-a-binary-package">2.1. Downloading and installing a binary package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide_getting_started.html#starting-tarantool-and-making-your-first-database">2.2. Starting Tarantool and making your first database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide_getting_started.html#connecting-remotely">2.3. Connecting remotely</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html">3. Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#data-model">3.1. Data model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#space">3.1.1. Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#tuple-set">3.1.2. Tuple set</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#index">3.1.3. Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#data-types">3.1.4. Data types</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#operations">3.1.5. Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#persistence">3.1.6. Persistence</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#data-manipulation">3.1.7. Data manipulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#index-operations">3.1.8. Index operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#the-box-library">3.2. The box library</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#transaction-control">3.3. Transaction control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#cooperative-multitasking-environment">3.3.1. Cooperative multitasking environment</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#example">3.3.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="index.html#implicit-yields">3.3.2. Implicit yields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#access-control">3.4. Access control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#passwords">3.4.1. Passwords</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#users-and-the-user-space">3.4.2. Users and the _user space</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#privileges-and-the-priv-space">3.4.3. Privileges and the _priv space</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#functions-and-the-func-space">3.4.4. Functions and the _func space</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#box-session-and-security">3.4.5. box.session and security</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#roles">3.4.6. Roles</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#example-showing-a-role-within-a-role">3.4.6.1. Example showing a role within a role</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#triggers">3.5. Triggers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#connection-triggers">3.5.1. Connection triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#id1">3.5.1.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="index.html#authentication-triggers">3.5.2. Authentication triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#lua-module.box.space">3.5.3. Replace triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#id2">3.5.3.1. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#another-example">3.5.3.2. Another example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="index.html#getting-a-list-of-triggers">3.5.4. Getting a list of triggers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#limitations">3.6. Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#vinyl-storage-engine">3.7. Vinyl storage engine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#differences-between-memtx-and-vinyl-storage-engines">3.7.1. Differences between memtx and vinyl storage engines</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#vinyl-features">3.7.2. Vinyl features</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#under-the-hood">3.7.3. Under the hood</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#inserting-the-first-200-000-keys">3.7.3.1. Inserting the first 200.000 keys</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#inserting-the-next-300-000-keys">3.7.3.2. Inserting the next 300.000 keys</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#inserting-the-next-200-000-keys">3.7.3.3. Inserting the next 200.000 keys</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#inserting-the-last-300-000-keys">3.7.3.4. Inserting the last 300.000 keys</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#reading-million-keys">3.7.3.5. Reading million keys</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app_server.html">4. Application server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#about-modules-rocks">4.1. About modules/rocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#installing-an-existing-module">4.2. Installing an existing module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#creating-a-new-lua-module-locally">4.3. Creating a new Lua module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#creating-a-new-c-c-module-locally">4.4. Creating a new C/C++ module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#creating-a-mixed-lua-c-module-locally">4.5. Creating a mixed Lua/C module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#tips-for-special-situations">4.6. Tips for special situations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app_server.html#cookbook-recipes">4.7. Cookbook recipes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../administration.html">5. Server administration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#using-tarantool-as-a-client">5.1. Using tarantool as a client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#conventions-used-in-this-section">5.1.1. Conventions used in this section</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#options-when-starting-client-from-the-command-line">5.1.2. Options when starting client from the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#tokens-requests-and-special-key-combinations">5.1.3. Tokens, requests, and special key combinations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#requests">5.1.4. Requests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#utility-tarantoolctl">5.2. Utility tarantoolctl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#configuration-for-tarantoolctl">5.2.1. Configuration for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#commands-for-tarantoolctl">5.2.2. Commands for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#typical-code-snippets-for-tarantoolctl">5.2.3. Typical code snippets for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#a-detailed-example-for-tarantoolctl">5.2.4. A detailed example for tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#an-example-for-tarantoolctl-connect">5.2.5. An example for tarantoolctl connect</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#administrative-ports">5.3. Administrative ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#administrative-requests">5.4. Administrative requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#server-introspection">5.5. Server introspection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#lua-module.box.cfg">5.5.1. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#lua-module.box.info">5.5.2. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#lua-module.box.slab">5.5.3. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#submodule-box-stat">5.5.4. Submodule <cite>box.stat</cite></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#replication">5.6. Replication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#replication-architecture">5.6.1. Replication architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#setting-up-a-master">5.6.2. Setting up a master</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#setting-up-a-replica">5.6.3. Setting up a replica</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#recovering-from-a-degraded-state">5.6.4. Recovering from a degraded state</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#quick-startup-of-a-new-simple-two-server-cluster">5.6.5. Quick startup of a new simple two-server cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#monitoring-a-replica-s-actions">5.6.6. Monitoring a replica's actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#preventing-duplicate-actions">5.6.7. Preventing duplicate actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#master-master-replication">5.6.8. Master-master replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#all-the-what-if-questions">5.6.9. All the &quot;What If?&quot; questions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#hands-on-replication-tutorial">5.6.10. Hands-on replication tutorial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#backups">5.7. Backups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#cold-backup">5.7.1. Cold backup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#continuous-remote-backup">5.7.2. Continuous remote backup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#hot-backup">5.7.3. Hot backup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#updates-upgrades">5.8. Updates/upgrades</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#updating-tarantool-in-production">5.8.1. Updating Tarantool in production</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#upgrading-a-tarantool-database">5.8.2. Upgrading a Tarantool database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#server-signal-handling">5.9. Server signal handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#process-title">5.10. Process title</a></li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#system-specific-administration-notes">5.11. System-specific administration notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#debian-gnu-linux-and-ubuntu">5.11.1. Debian GNU/Linux and Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#fedora-rhel-centos">5.11.2. Fedora, RHEL, CentOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#freebsd">5.11.3. FreeBSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#mac-os-x">5.11.4. Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration.html#notes-for-systemd-users">5.12. Notes for systemd users</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#instance-management">5.12.1. Instance management</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../administration.html#creating-instances">5.12.1.1. Creating instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../administration.html#starting-instances">5.12.1.2. Starting instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../administration.html#monitoring-instances">5.12.1.3. Monitoring instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../administration.html#attaching-to-instances">5.12.1.4. Attaching to instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../administration.html#checking-logs">5.12.1.5. Checking logs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../administration.html#stopping-instances">5.12.1.6. Stopping instances</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#daemon-supervision">5.12.2. Daemon supervision</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#customizing-the-service-file">5.12.3. Customizing the service file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#debugging">5.12.4. Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration.html#precautions">5.12.5. Precautions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../connectors/index.html">6. Connectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#protocol">6.1. Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#packet-example">6.2. Packet example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#setting-up-the-server-for-connector-examples">6.3. Setting up the server for connector examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#java">6.4. Java</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#go">6.5. Go</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#r">6.6. R</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#perl">6.7. Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#php">6.8. PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#python">6.9. Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#c">6.10. C</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../connectors/index.html#example-1">6.10.1. Example 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../connectors/index.html#example-2">6.10.2. Example 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../connectors/index.html#interpreting-function-return-values">6.11. Interpreting function return values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app/a_errcodes.html">7. Appendix A. List of error codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app/g_changes.html">8. Appendix B. Version-specific changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app/g_changes.html#changes-in-tarantool-version-1-7">8.1. Changes in Tarantool version 1.7</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../reference/index.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../reference/reference_lua/index.html">1. Library reference</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../reference/reference_lua/box.html">1.1. Module <cite>box</cite></a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="box_schema.html">1.1.1. Submodule <cite>box.schema</cite></a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.1.2. Submodule <cite>box.space</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#example-use-box-space-functions-to-read-space-tuples">1.1.2.1. Example: use box.space functions to read _space tuples</a></li>
<li class="toctree-l5"><a class="reference internal" href="#example-use-box-space-functions-to-organize-a-space-tuple">1.1.2.2. Example: use box.space functions to organize a _space tuple</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="box_index.html">1.1.3. Submodule <cite>box.index</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="box_index.html#example-showing-use-of-the-box-functions">1.1.3.1. Example showing use of the box functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="box_index.html#example-showing-a-user-defined-iterator">1.1.3.2. Example showing a user-defined iterator</a></li>
<li class="toctree-l5"><a class="reference internal" href="box_index.html#submodule-box-index-with-index-type-rtree-for-spatial-searches">1.1.3.3. Submodule <cite>box.index</cite> with index type = RTREE for spatial searches</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="box_session.html">1.1.4. Submodule <cite>box.session</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="box_session.html#example">1.1.4.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="box_tuple.html">1.1.5. Submodule <cite>box.tuple</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="box_tuple.html#example">1.1.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="box_introspection.html">1.1.6. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="box_introspection.html#lua-module.box.info">1.1.7. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="box_introspection.html#lua-module.box.slab">1.1.8. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="box_introspection.html#submodule-box-stat">1.1.9. Submodule <cite>box.stat</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="triggers.html">1.1.10. Connection triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="triggers.html#example">1.1.10.1. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="triggers.html#authentication-triggers">1.1.11. Authentication triggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="triggers.html#lua-module.box.space">1.1.12. Replace triggers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="triggers.html#id1">1.1.12.1. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="triggers.html#another-example">1.1.12.2. Another example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="triggers.html#getting-a-list-of-triggers">1.1.13. Getting a list of triggers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/clock.html">1.2. Module <cite>clock</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/console.html">1.3. Module <cite>console</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/crypto.html">1.4. Module <cite>crypto</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/crypto.html#incremental-methods-in-the-crypto-module">1.4.1. Incremental methods in the crypto module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/crypto.html#getting-the-same-results-from-digest-and-crypto-modules">1.4.2. Getting the same results from digest and crypto modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/csv.html">1.5. Module <cite>csv</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/digest.html">1.6. Module <cite>digest</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/digest.html#incremental-methods-in-the-digest-module">1.6.1. Incremental methods in the digest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/digest.html#example">1.6.2. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/box_error.html">1.7. Submodule <cite>box.error</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/fiber.html">1.8. Module <cite>fiber</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/fiber.html#example-of-fiber-use">1.8.1. Example Of Fiber Use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/fiber_ipc.html">1.9. Submodule <cite>fiber-ipc</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/fiber_ipc.html#example">1.9.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/fio.html">1.10. Module <cite>fio</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/fio.html#common-pathname-manipulations">1.10.1. Common pathname manipulations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/fio.html#common-file-manipulations">1.10.2. Common file manipulations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/fun.html">1.11. Module <cite>fun</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/jit.html">1.12. Module <cite>jit</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/json.html">1.13. Module <cite>json</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/json.html#configuration-settings">1.13.1. Configuration settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/log.html">1.14. Module <cite>log</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/log.html#example">1.14.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/msgpack.html">1.15. Module <cite>msgpack</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/msgpack.html#example">1.15.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/net_box.html">1.16. Module <cite>net.box</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/net_box.html#example-showing-use-of-most-of-the-net-box-methods">1.16.1. Example showing use of most of the net.box methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/box_once.html">1.17. Function <cite>box.once</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/os.html">1.18. Module <cite>os</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/pickle.html">1.19. Module <cite>pickle</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/socket.html">1.20. Module <cite>socket</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/socket.html#example">1.20.1. Example</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_lua/socket.html#use-of-a-tcp-socket-over-the-internet">1.20.1.1. Use of a TCP socket over the Internet</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_lua/socket.html#use-of-a-udp-socket-on-localhost">1.20.1.2. Use of a UDP socket on localhost</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_lua/socket.html#use-tcp-server-to-accept-file-contents-sent-with-socat">1.20.1.3. Use tcp_server to accept file contents sent with socat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/strict.html">1.21. Module <cite>strict</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/tap.html">1.22. Module <cite>tap</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/tap.html#example">1.22.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/tarantool.html">1.23. Module <cite>tarantool</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/uuid.html">1.24. Module <cite>uuid</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/uuid.html#example">1.24.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/yaml.html">1.25. Module <cite>yaml</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_lua/yaml.html#example">1.25.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_lua/other.html">1.26. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/reference_rock/index.html">2. Rocks reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_rock/dbms.html">2.1. SQL DBMS Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/dbms.html#mysql-example">2.1.1. MySQL Example</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#installation">2.1.1.1. Installation</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../reference/reference_rock/dbms.html#with-luarocks">2.1.1.1.1. With LuaRocks</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../reference/reference_rock/dbms.html#with-github">2.1.1.1.2. With GitHub</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#connecting">2.1.1.2. Connecting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#how-to-ping">2.1.1.3. How to ping</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#executing-a-statement">2.1.1.4. Executing a statement</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#closing-connection">2.1.1.5. Closing connection</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#example">2.1.1.6. Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/dbms.html#postgresql-example">2.1.2. PostgreSQL Example</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id1">2.1.2.1. Installation</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id2">2.1.2.1.1. With LuaRocks</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id3">2.1.2.1.2. With GitHub</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id4">2.1.2.2. Connecting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id5">2.1.2.3. How to ping</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id6">2.1.2.4. Executing a statement</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id7">2.1.2.5. Closing connection</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../reference/reference_rock/dbms.html#id8">2.1.2.6. Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_rock/expirationd.html">2.2. Module <cite>expirationd</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_rock/shard.html">2.3. Module <cite>shard</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/shard.html#example-shard-init-syntax-for-one-shard">2.3.1. Example: shard.init syntax for one shard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/shard.html#example-shard-init-syntax-for-three-shards">2.3.2. Example: shard.init syntax for three shards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/shard.html#example-shard-minimal-configuration">2.3.3. Example: Shard, Minimal Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/shard.html#example-shard-scaling-out">2.3.4. Example: Shard, Scaling Out</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/reference_rock/tdb.html">2.4. Module <cite>tdb</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/tdb.html#debugger-commands">2.4.1. Debugger Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/reference_rock/tdb.html#example-session">2.4.2. Example Session</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/configuration/index.html">3. Configuration reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/configuration/index.html#command-options">3.1. Command options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/configuration/index.html#uri">3.2. URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/configuration/index.html#initialization-file">3.3. Initialization file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/configuration/index.html#configuration-parameters">3.4. Configuration parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#basic-parameters">3.4.1. Basic parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#configuring-the-storage">3.4.2. Configuring the storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#snapshot-daemon">3.4.3. Snapshot daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#binary-logging-and-snapshots">3.4.4. Binary logging and snapshots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#replication">3.4.5. Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#networking">3.4.6. Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/configuration/index.html#logging">3.4.7. Logging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Contributor's Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/reference_capi/index.html">1. C API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/box.html">1.1. Module <cite>box</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/clock.html">1.2. Module <cite>clock</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/coio.html">1.3. Module <cite>coio</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/error.html">1.4. Module <cite>error</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/fiber.html">1.5. Module <cite>fiber</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/box_index.html">1.6. Module <cite>index</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/latch.html">1.7. Module <cite>latch</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/utils.html">1.8. Module <cite>lua/utils</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/say.html">1.9. Module <cite>say</cite> (logging)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/schema.html">1.10. Module <cite>schema</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/trivia.html">1.11. Module <cite>trivia/config</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/tuple.html">1.12. Module <cite>tuple</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/txn.html">1.13. Module <cite>txn</cite></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/internals_index.html">2. Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#tarantool-s-binary-protocol">2.1. Tarantool's binary protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#notion-in-diagrams">2.1.1. Notion in diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#greeting-packet">2.1.2. Greeting packet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#unified-packet-structure">2.1.3. Unified packet structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#authentication">2.1.4. Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#requests">2.1.5. Requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#response-packet-structure">2.1.6. Response packet structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#replication-packet-structure">2.1.7. Replication packet structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#xlog-snap">2.1.8. XLOG / SNAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#data-persistence-and-the-wal-file-format">2.2. Data persistence and the WAL file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#the-snapshot-file-format">2.3. The snapshot file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#the-recovery-process">2.4. The recovery process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#server-startup-with-replication">2.5. Server startup with replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/build_contribute_index.html">3. Build and contribute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/building_from_source.html">3.1. Building from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/building_documentation.html">3.2. Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/release_management.html">3.3. Release management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/release_management.html#how-to-make-a-minor-release">3.3.1. How to make a minor release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/guidelines_index.html">4. Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/developer_guidelines.html">4.1. Developer guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/developer_guidelines.html#how-to-work-on-a-bug">4.1.1. How to work on a bug</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html">4.2. Documentation guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#markup-issues">4.2.1. Markup issues</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#wrapping-text">4.2.1.1. Wrapping text</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#formatting-code-snippets">4.2.1.2. Formatting code snippets</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#using-separated-links">4.2.1.3. Using separated links</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#creating-labels-for-local-links">4.2.1.4. Creating labels for local links</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#making-comments">4.2.1.5. Making comments</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#language-and-style-issues">4.2.2. Language and style issues</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#us-vs-british-spelling">4.2.2.1. US vs British spelling</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#examples-and-templates">4.2.3. Examples and templates</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#module-and-function">4.2.3.1. Module and function</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#module-class-and-method">4.2.3.2. Module, class and method</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/c_style_guide.html">4.3. C Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/c_style_guide.html#general-guidelines">4.3.1. General guidelines</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#commenting-style">4.3.1.1. Commenting style</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#header-files">4.3.1.2. Header files</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#allocating-memory">4.3.1.3. Allocating memory</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#other">4.3.1.4. Other</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/c_style_guide.html#linux-kernel-coding-style">4.3.2. Linux kernel coding style</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-1-indentation">4.3.2.1. Chapter 1: Indentation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-2-breaking-long-lines-and-strings">4.3.2.2. Chapter 2: Breaking long lines and strings</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-3-placing-braces-and-spaces">4.3.2.3. Chapter 3: Placing Braces and Spaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-3-1-spaces">4.3.2.4. Chapter 3.1:  Spaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-4-naming">4.3.2.5. Chapter 4: Naming</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-5-typedefs">4.3.2.6. Chapter 5: Typedefs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-6-functions">4.3.2.7. Chapter 6: Functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-7-centralized-exiting-of-functions">4.3.2.8. Chapter 7: Centralized exiting of functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-8-commenting">4.3.2.9. Chapter 8: Commenting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-9-you-ve-made-a-mess-of-it">4.3.2.10. Chapter 9: You've made a mess of it</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-10-kconfig-configuration-files">4.3.2.11. Chapter 10: Kconfig configuration files</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-11-data-structures">4.3.2.12. Chapter 11: Data structures</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-12-macros-enums-and-rtl">4.3.2.13. Chapter 12: Macros, Enums and RTL</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-13-printing-kernel-messages">4.3.2.14. Chapter 13: Printing kernel messages</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-14-allocating-memory">4.3.2.15. Chapter 14: Allocating memory</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-15-the-inline-disease">4.3.2.16. Chapter 15: The inline disease</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-16-function-return-values-and-names">4.3.2.17. Chapter 16: Function return values and names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-17-don-t-re-invent-the-kernel-macros">4.3.2.18. Chapter 17:  Don't re-invent the kernel macros</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-18-editor-modelines-and-other-cruft">4.3.2.19. Chapter 18:  Editor modelines and other cruft</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#appendix-i-references">4.3.2.20. Appendix I: References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/python_style_guide.html">4.4. Python Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#introduction">4.4.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#a-foolish-consistency-is-the-hobgoblin-of-little-minds">4.4.2. A Foolish Consistency is the Hobgoblin of Little Minds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#code-lay-out">4.4.3. Code lay-out</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#indentation">4.4.3.1. Indentation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#tabs-or-spaces">4.4.3.2. Tabs or Spaces?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#maximum-line-length">4.4.3.3. Maximum Line Length</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#blank-lines">4.4.3.4. Blank Lines</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#encodings-pep-263">4.4.3.5. Encodings (PEP 263)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#imports">4.4.3.6. Imports</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#whitespace-in-expressions-and-statements">4.4.4. Whitespace in Expressions and Statements</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#pet-peeves">4.4.4.1. Pet Peeves</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#other-recommendations">4.4.4.2. Other Recommendations</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#comments">4.4.5. Comments</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#block-comments">4.4.5.1. Block Comments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#inline-comments">4.4.5.2. Inline Comments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#documentation-strings">4.4.5.3. Documentation Strings</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#version-bookkeeping">4.4.6. Version Bookkeeping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#naming-conventions">4.4.7. Naming Conventions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#descriptive-naming-styles">4.4.7.1. Descriptive: Naming Styles</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#prescriptive-naming-conventions">4.4.7.2. Prescriptive: Naming Conventions</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#names-to-avoid">4.4.7.2.1. Names to Avoid</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#package-and-module-names">4.4.7.2.2. Package and Module Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#class-names">4.4.7.2.3. Class Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#exception-names">4.4.7.2.4. Exception Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#global-variable-names">4.4.7.2.5. Global Variable Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#function-names">4.4.7.2.6. Function Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#function-and-method-arguments">4.4.7.2.7. Function and method arguments</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#method-names-and-instance-variables">4.4.7.2.8. Method Names and Instance Variables</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#constants">4.4.7.2.9. Constants</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#designing-for-inheritance">4.4.7.2.10. Designing for inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#references">4.4.8. References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#copyright">4.4.9. Copyright</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="b-cols_content_right">
        <div class="b-cols_content_right-slot">
  <div class="b-page_header">
    <ul class="b-path-list">
      <li class="b-path-list-item">
        <a href="../../index.html"
           class="b-path-list-item-url">
          Documentation
        </a>
      </li>
      
        <li class="b-path-list-item">
          <a href="../../reference/index.html"
             class="b-path-list-item-url b-ellipsis">
            Reference
          </a>
        </li>
      
        <li class="b-path-list-item">
          <a href="../../reference/reference_lua/index.html"
             class="b-path-list-item-url b-ellipsis">
            1. Library reference
          </a>
        </li>
      
        <li class="b-path-list-item">
          <a href="../../reference/reference_lua/box.html"
             class="b-path-list-item-url b-ellipsis">
            1.1. Module <cite>box</cite>
          </a>
        </li>
      
      
      <li class="b-path-list-item">
        <div title="1.1.2. Submodule <cite>box.space</cite>" class="b-path_current b-ellipsis">
          1.1.2. Submodule <cite>box.space</cite>
        </div>
      </li>
      
    </ul>
  </div>

  <div class="section" id="submodule-box-space">
<span id="box-space"></span><h1>1.1.2. Submodule <cite>box.space</cite><a class="headerlink" href="#submodule-box-space" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">box.space</span></code> submodule has the data-manipulation functions <code class="docutils literal"><span class="pre">select</span></code>,
<code class="docutils literal"><span class="pre">insert</span></code>, <code class="docutils literal"><span class="pre">replace</span></code>, <code class="docutils literal"><span class="pre">update</span></code>, <code class="docutils literal"><span class="pre">upsert</span></code>, <code class="docutils literal"><span class="pre">delete</span></code>, <code class="docutils literal"><span class="pre">get</span></code>, <code class="docutils literal"><span class="pre">put</span></code>.
It also has members, such as id, and whether or not a space is enabled. Submodule
source code is available in file
<a class="reference external" href="https://github.com/tarantool/tarantool/blob/1.7/src/box/lua/schema.lua">src/box/lua/schema.lua</a>.</p>
<p>A list of all <code class="docutils literal"><span class="pre">box.space</span></code> functions follows, then comes a list of all
<code class="docutils literal"><span class="pre">box.space</span></code> members.</p>
<blockquote>
<div><div class="table container">
<p><strong>The functions and members of box.space</strong></p>
<table border="1" class="left-align-column-1 left-align-column-2 docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Use</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#box-space-create-index"><span class="std std-ref">space_object:create_index()</span></a></td>
<td>Create an index</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-insert"><span class="std std-ref">space_object:insert()</span></a></td>
<td>Insert a tuple</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-select"><span class="std std-ref">space_object:select()</span></a></td>
<td>Select one or more tuples</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-get"><span class="std std-ref">space_object:get()</span></a></td>
<td>Select a tuple</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-drop"><span class="std std-ref">space_object:drop()</span></a></td>
<td>Destroy a space</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-rename"><span class="std std-ref">space_object:rename()</span></a></td>
<td>Rename a space</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-replace"><span class="std std-ref">space_object:replace()</span></a></td>
<td>Insert or replace a tuple</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-replace"><span class="std std-ref">space_object:put()</span></a></td>
<td>Insert or replace a tuple</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-update"><span class="std std-ref">space_object:update()</span></a></td>
<td>Update a tuple</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-upsert"><span class="std std-ref">space_object:upsert()</span></a></td>
<td>Update a tuple</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-delete"><span class="std std-ref">space_object:delete()</span></a></td>
<td>Delete a tuple</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-count"><span class="std std-ref">space_object:count()</span></a></td>
<td>Get count of tuples</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-len"><span class="std std-ref">space_object:len()</span></a></td>
<td>Get count of tuples</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-truncate"><span class="std std-ref">space_object:truncate()</span></a></td>
<td>Delete all tuples</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-auto-increment"><span class="std std-ref">space_object:auto_increment()</span></a></td>
<td>Generate key + Insert a tuple</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-pairs"><span class="std std-ref">space_object:pairs()</span></a></td>
<td>Prepare for iterating</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-id"><span class="std std-ref">space_object.id</span></a></td>
<td>.Numeric identifier of space</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-enabled"><span class="std std-ref">space_object.enabled</span></a></td>
<td>.Flag, true if space is enabled</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-field-count"><span class="std std-ref">space_object.field_count</span></a></td>
<td>.Required number of fields</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-field-count"><span class="std std-ref">space_object.index</span></a></td>
<td>.Container of space's indexes</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-schema"><span class="std std-ref">box.space._schema</span></a></td>
<td>.(Metadata) List of schemas</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-space"><span class="std std-ref">box.space._space</span></a></td>
<td>.(Metadata) List of spaces</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-index"><span class="std std-ref">box.space._index</span></a></td>
<td>.(Metadata) List of indexes</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-user"><span class="std std-ref">box.space._user</span></a></td>
<td>.(Metadata) List of users</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-priv"><span class="std std-ref">box.space._priv</span></a></td>
<td>.(Metadata) List of privileges</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#box-space-cluster"><span class="std std-ref">box.space._cluster</span></a></td>
<td>.(Metadata) List of clusters</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#box-space-func"><span class="std std-ref">box.space._func</span></a></td>
<td>.(Metadata) List of function
tuples</td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<span class="target" id="lua-module.box.space"></span><dl class="class">
<dt id="lua-object.box.space.space_object">
<em class="property">object </em><code class="descname">space_object</code><a class="headerlink" href="#lua-object.box.space.space_object" title="Permalink to this definition">¶</a></dt>
<dd><span class="target" id="box-space-create-index"></span><dl class="method">
<dt id="lua-function.space_object.create_index">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">create_index</code><big>(</big><em>index-name</em><span class="optional">[</span>, <em>{options}</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-function.space_object.create_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an index. It is mandatory to create an index for a tuple set
before trying to insert tuples into it, or select tuples from it. The
first created index, which will be used as the primary-key index, must be
unique.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">index_name</span> (type = string) = name of index, which should not be a number
and should not contain special characters;
<span class="ccodei">options</span>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">index object</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">index_object</td>
</tr>
</tbody>
</table>
<div class="table container">
<p>Options for <code class="docutils literal"><span class="pre">space_object:create_index</span></code>:</p>
<table border="1" class="left-align-column-1 left-align-column-2 left-align-column-3 left-align-column-4 docutils">
<colgroup>
<col width="18%" />
<col width="24%" />
<col width="34%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Effect</th>
<th class="head">Type</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>type</td>
<td>type of index</td>
<td>string
('HASH' or 'TREE' or
'BITSET' or 'RTREE')</td>
<td>'TREE'</td>
</tr>
<tr class="row-odd"><td>id</td>
<td>unique identifier</td>
<td>number</td>
<td>last index's id, +1</td>
</tr>
<tr class="row-even"><td>unique</td>
<td>index is unique</td>
<td>boolean</td>
<td><code class="docutils literal"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td>if_not_exists</td>
<td>no error if
duplicate name</td>
<td>boolean</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>parts</td>
<td>field-numbers  +
types</td>
<td>{field_no, 'unsigned' or
'string' or 'integer' or
'number' or 'array' or
'scalar'}</td>
<td><code class="docutils literal"><span class="pre">{1,</span> <span class="pre">'unsigned'}</span></code></td>
</tr>
</tbody>
</table>
</div>
<p>Possible errors: too many parts. Index '...' already exists. Primary key must be unique.</p>
<p>Note re storage engine: vinyl supports only the TREE index type,
and vinyl secondary indexes must be created before tuples are inserted.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">space55</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">create_index</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">primary&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">unique</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">parts</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">unsigned&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">string&#39;</span><span class="p">}})</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<blockquote id="details-about-index-field-types">
<div><p>Details about index field types: <br />
The six index field types (unsigned | string | integer | number | array | scalar)
differ depending on what values are allowed, and what index types are allowed. <br />
<strong>unsigned</strong>: unsigned integers between 0 and 18446744073709551615, about 18 quintillion.
May also be called 'uint' or 'num', but 'num' is deprecated.
Legal in memtx TREE or HASH indexes, and in vinyl TREE indexes. <br />
<strong>string</strong>: any set of octets, up to the <a class="reference internal" href="limitations.html#limitations-bytes-in-index-key"><span class="std std-ref">maximum length</span></a>.
May also be called 'str'.
Legal in memtx TREE or HASH or BITSET indexes, and in vinyl TREE indexes. <br />
<strong>integer</strong>: integers between -9223372036854775808 and 18446744073709551615.
May also be called 'int'.
Legal in memtx TREE or HASH indexes, and in vinyl TREE indexes. <br />
<strong>number</strong>: integers between -9223372036854775808 and 18446744073709551615,
single-precision floating point numbers, or double-precision floating point numbers.
Legal in memtx TREE or HASH indexes, and in vinyl TREE indexes. <br />
<strong>array</strong>: array of integers between -9223372036854775808 and 9223372036854775807.
Legal in memtx RTREE indexes. <br />
<strong>scalar</strong>: booleans (true or false), or integers between -9223372036854775808 and 18446744073709551615,
or single-precision floating point numbers, or double-precison floating-point numbers,
or strings. When there is a mix of types, the key order is: booleans, then numbers, then strings.
Legal in memtx TREE or HASH indexes, and in vinyl TREE indexes.</p>
<div class="table container">
<p><strong>Index field types to use in create_index</strong></p>
<table border="1" class="left-align-column-1 left-align-column-2 left-align-column-3 left-align-column-4 top-align-column-1 docutils">
<colgroup>
<col width="17%" />
<col width="26%" />
<col width="38%" />
<col width="18%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Index field type</td>
<td>What can be in it</td>
<td>Where is it legal</td>
<td>Examples</td>
</tr>
<tr class="row-even"><td><strong>unsigned</strong></td>
<td>integers between 0 and
18446744073709551615</td>
<td>memtx TREE or HASH
indexes, <br />
vinyl TREE indexes</td>
<td>123456 <br /></td>
</tr>
<tr class="row-odd"><td><strong>string</strong></td>
<td>strings -- any set of
octets</td>
<td>memtx TREE or HASH indexes <br />
vinyl TREE indexes</td>
<td>'A B C' <br />
'\65 \66 \67'</td>
</tr>
<tr class="row-even"><td><strong>integer</strong></td>
<td>integers between
-9223372036854775808 and
18446744073709551615</td>
<td>memtx TREE or HASH indexes, <br />
vinyl TREE indexes</td>
<td>-2^63 <br /></td>
</tr>
<tr class="row-odd"><td><strong>number</strong></td>
<td>integers between
-9223372036854775808 and
18446744073709551615,
single-precision
floating point numbers,
double-precision
floating point numbers</td>
<td>memtx TREE or HASH indexes, <br />
vinyl TREE indexes</td>
<td>1.234 <br />
-44 <br />
1.447e+44</td>
</tr>
<tr class="row-even"><td><strong>array</strong></td>
<td>array of integers between
-9223372036854775808 and
9223372036854775807</td>
<td>memtx RTREE indexes</td>
<td>{10, 11} <br />
{3, 5, 9, 10}</td>
</tr>
<tr class="row-odd"><td><strong>scalar</strong></td>
<td>booleans (true or false),
integers between
-9223372036854775808 and
18446744073709551615,
single-precision floating
point numbers,
double-precision floating
point numbers, strings</td>
<td>memtx TREE or HASH indexes, <br />
vinyl TREE indexes</td>
<td>true <br />
-1 <br />
1.234 <br />
'' <br />
'俄國'</td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<span class="target" id="box-space-insert"></span><dl class="method">
<dt id="lua-function.space_object.insert">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">insert</code><big>(</big><em>tuple</em><big>)</big><a class="headerlink" href="#lua-function.space_object.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a tuple into a space.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">tuple</span> (type = Lua table or tuple) = tuple to be inserted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the inserted tuple</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
<p>Possible errors: If a tuple with the same unique-key value already exists,
returns <code class="xref std std-errcode docutils literal"><span class="pre">ER_TUPLE_FOUND</span></code>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">5000</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">tuple number five thousand&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">5000</span><span class="p p-Indicator">,</span> <span class="s">&#39;tuple</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">five</span><span class="nv"> </span><span class="s">thousand&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-select"></span><dl class="method">
<dt id="lua-function.space_object.select">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">select</code><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#lua-function.space_object.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for a tuple or a set of tuples in the given space.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">key</span> (type = Lua table or scalar) = key to be matched against the index key,
which may be multi-part.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the tuples whose primary-key fields are equal to the passed
field-values. If the number of passed field-values is less
than the number of fields in the primary key, then only the
passed field-values are compared, so <code class="docutils literal"><span class="pre">select{1,2}</span></code> will match
a tuple whose primary key is <code class="docutils literal"><span class="pre">{1,2,3}</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">array of tuples</td>
</tr>
</tbody>
</table>
<p>Possible errors: No such space; wrong type.</p>
<p><strong>Complexity Factors:</strong> Index size, Index type.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">box</span><span class="p">.</span><span class="n">schema</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">tmp&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">temporary</span><span class="o">=</span><span class="kc">true</span><span class="p">})</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">create_index</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">primary&#39;</span><span class="p">,{</span><span class="n">parts</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">unsigned&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">string&#39;</span><span class="p">}})</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">A&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;A&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">B&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;B&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">C&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;C&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">D&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span> <span class="s">&#39;D&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="c1">-- must equal both primary-key fields</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="nb">select</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">B&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;B&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="c1">-- must equal only one primary-key field</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="nb">select</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;A&#39;</span><span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;B&#39;</span><span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;C&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="c1">-- must equal 0 fields, so returns all tuples</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="nb">select</span><span class="p">{}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;A&#39;</span><span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;B&#39;</span><span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;C&#39;</span><span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span> <span class="s">&#39;D&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>For examples of complex <code class="docutils literal"><span class="pre">select</span></code> requests, where one can specify which
index to search and what condition to use (for example &quot;greater than&quot;
instead of &quot;equal to&quot;) and how many tuples to return, see the later section
<a class="reference internal" href="box_index.html#box-index-select"><span class="std std-ref">index_object:select</span></a>.</p>
</dd></dl>

<span class="target" id="box-space-get"></span><dl class="method">
<dt id="lua-function.space_object.get">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">get</code><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#lua-function.space_object.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for a tuple in the given space.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">key</span> (type = Lua table or scalar) = key to be matched against the index
key, which may be multi-part.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the tuple whose index key matches <span class="ccodei">key</span>, or null.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
<p>Possible errors: If space_object does not exist.</p>
<p><strong>Complexity Factors:</strong> Index size, Index type,
Number of indexes accessed, WAL settings.</p>
<p>The <code class="docutils literal"><span class="pre">box.space...select</span></code> function returns a set
of tuples as a Lua table; the <code class="docutils literal"><span class="pre">box.space...get</span></code>
function returns at most a single tuple. And it is possible to get
the first tuple in a tuple set by appending <code class="docutils literal"><span class="pre">[1]</span></code>.
Therefore <code class="docutils literal"><span class="pre">box.space.tester:get{1}</span></code> has the same
effect as <code class="docutils literal"><span class="pre">box.space.tester:select{1}[1]</span></code>,
if exactly one tuple is found.</p>
<p><strong>Example:</strong></p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">get</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-drop"></span><dl class="method">
<dt id="lua-function.space_object.drop">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">drop</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.space_object.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop a space.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">nil</td>
</tr>
</tbody>
</table>
<p>Possible errors: If space_object does not exist.</p>
<p><strong>Complexity Factors:</strong> Index size, Index type,
Number of indexes accessed, WAL settings.</p>
<p><strong>Example:</strong></p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">space_that_does_not_exist</span><span class="p">:</span><span class="n">drop</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-rename"></span><dl class="method">
<dt id="lua-function.space_object.rename">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">rename</code><big>(</big><em>space-name</em><big>)</big><a class="headerlink" href="#lua-function.space_object.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename a space.</p>
<p>Parameters:<code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">space-name</span> (type = string) = new name for space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">nil</td>
</tr>
</tbody>
</table>
<p>Possible errors: space_object does not exist.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">space55</span><span class="p">:</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">space56&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">space56</span><span class="p">:</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">space55&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-replace"></span><dl class="method">
<dt id="lua-function.space_object.replace">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">replace</code><big>(</big><em>tuple</em><big>)</big><a class="headerlink" href="#lua-function.space_object.replace" title="Permalink to this definition">¶</a></dt>
<dt id="lua-function.space_object.put">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">put</code><big>(</big><em>tuple</em><big>)</big><a class="headerlink" href="#lua-function.space_object.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a tuple into a space. If a tuple with the same primary key already
exists, <code class="docutils literal"><span class="pre">box.space...:replace()</span></code> replaces the existing tuple with a new
one. The syntax variants <code class="docutils literal"><span class="pre">box.space...:replace()</span></code> and
<code class="docutils literal"><span class="pre">box.space...:put()</span></code> have the same effect; the latter is sometimes used
to show that the effect is the converse of <code class="docutils literal"><span class="pre">box.space...:get()</span></code>.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">tuple</span> (type = Lua table or tuple) = tuple to be inserted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the inserted tuple.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
<p>Possible errors: If a different tuple with the same unique-key
value already exists, returns <code class="xref std std-errcode docutils literal"><span class="pre">ER_TUPLE_FOUND</span></code>. (This
will only happen if there is a unique secondary index.)</p>
<p><strong>Complexity Factors:</strong> Index size, Index type,
Number of indexes accessed, WAL settings.</p>
<p><strong>Example:</strong></p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">replace</span><span class="p">{</span><span class="mi">5000</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">tuple number five thousand&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-update"></span><dl class="method">
<dt id="lua-function.space_object.update">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">update</code><big>(</big><em>key</em>, <em>{{operator</em>, <em>field_no</em>, <em>value}</em>, <em>...}</em><big>)</big><a class="headerlink" href="#lua-function.space_object.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a tuple.</p>
<p>The <code class="docutils literal"><span class="pre">update</span></code> function supports operations on fields — assignment,
arithmetic (if the field is numeric), cutting and pasting
fragments of a field, deleting or inserting a field. Multiple
operations can be combined in a single update request, and in this
case they are performed atomically and sequentially. Each operation
requires specification of a field number. When multiple operations
are present, the field number for each operation is assumed to be
relative to the most recent state of the tuple, that is, as if all
previous operations in a multi-operation update have already been
applied. In other words, it is always safe to merge multiple <code class="docutils literal"><span class="pre">update</span></code>
invocations into a single invocation, with no change in semantics.</p>
<p>Possible operators are:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">+</span></code> for addition (values must be numeric)</li>
<li><code class="docutils literal"><span class="pre">-</span></code> for subtraction (values must be numeric)</li>
<li><code class="docutils literal"><span class="pre">&amp;</span></code> for bitwise AND (values must be unsigned numeric)</li>
<li><code class="docutils literal"><span class="pre">|</span></code> for bitwise OR (values must be unsigned numeric)</li>
<li><code class="docutils literal"><span class="pre">^</span></code> for bitwise <abbr title="exclusive OR">XOR</abbr> (values must be unsigned numeric)</li>
<li><code class="docutils literal"><span class="pre">:</span></code> for string splice</li>
<li><code class="docutils literal"><span class="pre">!</span></code> for insertion</li>
<li><code class="docutils literal"><span class="pre">#</span></code> for deletion</li>
<li><code class="docutils literal"><span class="pre">=</span></code> for assignment</li>
</ul>
</div></blockquote>
<p>For <code class="docutils literal"><span class="pre">!</span></code> and <code class="docutils literal"><span class="pre">=</span></code> operations the field number can be <code class="docutils literal"><span class="pre">-1</span></code>, meaning the last field in the tuple.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">key</span> (type = Lua table or scalar) = primary-key field values, must be passed as a Lua
table if key is multi-part;
<span class="ccodei">{operator, field_no, value}</span> (type = table): a group of arguments for each
operation, indicating what the operation is, what field the
operation will apply to, and what value will be applied. The
field number can be negative, meaning the position from the end of
tuple (#tuple + negative field number + 1).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the updated tuple.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
<p>Possible errors: it is illegal to modify a primary-key field.</p>
<p><strong>Complexity Factors:</strong> Index size, Index type, number of indexes accessed, WAL
settings.</p>
<p>Thus, in the instruction:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">s</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="p">{{</span><span class="s1">&#39;</span><span class="s">+&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">55</span> <span class="p">},</span> <span class="p">{</span><span class="s1">&#39;</span><span class="s">=&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">x&#39;</span><span class="p">}})</span>
</pre></div>
</div>
<p>the primary-key value is <code class="docutils literal"><span class="pre">44</span></code>, the operators are <code class="docutils literal"><span class="pre">'+'</span></code> and <code class="docutils literal"><span class="pre">'='</span></code> meaning
<em>add a value to a field and then assign a value to a field</em>, the first
affected field is field <code class="docutils literal"><span class="pre">1</span></code> and the value which will be added to it is
<code class="docutils literal"><span class="pre">55</span></code>, the second affected field is field <code class="docutils literal"><span class="pre">3</span></code> and the value which will be
assigned to it is <code class="docutils literal"><span class="pre">'x'</span></code>.</p>
<p><strong>Example:</strong></p>
<p>Assume that initially there is a space named <code class="docutils literal"><span class="pre">tester</span></code>
with a primary-key index whose type is <code class="docutils literal"><span class="pre">unsigned</span></code>.
There is one tuple, with <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code> and <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'A'</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update(999,</span> <span class="pre">{{'=',</span> <span class="pre">2,</span> <span class="pre">'B'}})</span></code> <br />
The first argument is <code class="docutils literal"><span class="pre">tester</span></code>, that is, the affected space is <code class="docutils literal"><span class="pre">tester</span></code>.
The second argument is <code class="docutils literal"><span class="pre">999</span></code>, that is, the affected tuple is identified by
primary key value = 999.
The third argument is <code class="docutils literal"><span class="pre">=</span></code>, that is, there is one operation —
<em>assignment to a field</em>.
The fourth argument is <code class="docutils literal"><span class="pre">2</span></code>, that is, the affected field is <code class="docutils literal"><span class="pre">field[2]</span></code>.
The fifth argument is <code class="docutils literal"><span class="pre">'B'</span></code>, that is, <code class="docutils literal"><span class="pre">field[2]</span></code> contents change to <code class="docutils literal"><span class="pre">'B'</span></code>.
Therefore, after this update, <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code> and <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'B'</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{'=',</span> <span class="pre">2,</span> <span class="pre">'B'}})</span></code> <br />
the arguments are the same, except that the key is passed as a Lua table
(inside braces). This is unnecessary when the primary key has only one
field, but would be necessary if the primary key had more than one field.
Therefore, after this update, <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code> and <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'B'</span></code> (no change).</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{'=',</span> <span class="pre">3,</span> <span class="pre">1}})</span></code> <br />
the arguments are the same, except that the fourth argument is <code class="docutils literal"><span class="pre">3</span></code>,
that is, the affected field is <code class="docutils literal"><span class="pre">field[3]</span></code>. It is okay that, until now,
<code class="docutils literal"><span class="pre">field[3]</span></code> has not existed. It gets added. Therefore, after this update,
<code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code>, <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'B'</span></code>, <code class="docutils literal"><span class="pre">field[3]</span></code> = <code class="docutils literal"><span class="pre">1</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{'+',</span> <span class="pre">3,</span> <span class="pre">1}})</span></code> <br />
the arguments are the same, except that the third argument is <code class="docutils literal"><span class="pre">'+'</span></code>,
that is, the operation is addition rather than assignment. Since
<code class="docutils literal"><span class="pre">field[3]</span></code> previously contained <code class="docutils literal"><span class="pre">1</span></code>, this means we're adding <code class="docutils literal"><span class="pre">1</span></code>
to <code class="docutils literal"><span class="pre">1</span></code>. Therefore, after this update, <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code>,
<code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'B'</span></code>, <code class="docutils literal"><span class="pre">field[3]</span></code> = <code class="docutils literal"><span class="pre">2</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{'|',</span> <span class="pre">3,</span> <span class="pre">1},</span> <span class="pre">{'=',</span> <span class="pre">2,</span> <span class="pre">'C'}})</span></code> <br />
the idea is to modify two fields at once. The formats are <code class="docutils literal"><span class="pre">'|'</span></code> and
<code class="docutils literal"><span class="pre">=</span></code>, that is, there are two operations, OR and assignment. The fourth
and fifth arguments mean that <code class="docutils literal"><span class="pre">field[3]</span></code> gets OR'ed with <code class="docutils literal"><span class="pre">1</span></code>. The
seventh and eighth arguments mean that <code class="docutils literal"><span class="pre">field[2]</span></code> gets assigned <code class="docutils literal"><span class="pre">'C'</span></code>.
Therefore, after this update, <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code>, <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'C'</span></code>,
<code class="docutils literal"><span class="pre">field[3]</span></code> = <code class="docutils literal"><span class="pre">3</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{'#',</span> <span class="pre">2,</span> <span class="pre">1},</span> <span class="pre">{'-',</span> <span class="pre">2,</span> <span class="pre">3}})</span></code> <br />
The idea is to delete <code class="docutils literal"><span class="pre">field[2]</span></code>, then subtract <code class="docutils literal"><span class="pre">3</span></code> from <code class="docutils literal"><span class="pre">field[3]</span></code>.
But after the delete, there is a renumbering, so <code class="docutils literal"><span class="pre">field[3]</span></code> becomes
<code class="docutils literal"><span class="pre">field[2]`</span></code> before we subtract <code class="docutils literal"><span class="pre">3</span></code> from it, and that's why the
seventh argument is <code class="docutils literal"><span class="pre">2</span></code>, not <code class="docutils literal"><span class="pre">3</span></code>. Therefore, after this update,
<code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code>, <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">0</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{'=',</span> <span class="pre">2,</span> <span class="pre">'XYZ'}})</span></code> <br />
we're making a long string so that splice will work in the next example.
Therefore, after this update, <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code>, <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'XYZ'</span></code>.</p>
<p>In the update: <br />
<code class="docutils literal"><span class="pre">box.space.tester:update({999},</span> <span class="pre">{{':',</span> <span class="pre">2,</span> <span class="pre">2,</span> <span class="pre">1,</span> <span class="pre">'!!'}})</span></code> <br />
The third argument is <code class="docutils literal"><span class="pre">':'</span></code>, that is, this is the example of splice.
The fourth argument is <code class="docutils literal"><span class="pre">2</span></code> because the change will occur in <code class="docutils literal"><span class="pre">field[2]</span></code>.
The fifth argument is 2 because deletion will begin with the second byte.
The sixth argument is 1 because the number of bytes to delete is 1.
The seventh argument is <code class="docutils literal"><span class="pre">'!!'</span></code>, because <code class="docutils literal"><span class="pre">'!!'</span></code> is to be added at this position.
Therefore, after this update, <code class="docutils literal"><span class="pre">field[1]</span></code> = <code class="docutils literal"><span class="pre">999</span></code>, <code class="docutils literal"><span class="pre">field[2]</span></code> = <code class="docutils literal"><span class="pre">'X!!Z'</span></code>.</p>
</dd></dl>

<span class="target" id="box-space-upsert"></span><dl class="method">
<dt id="lua-function.space_object.upsert">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">upsert</code><big>(</big><em>tuple_value</em>, <em>{{operator</em>, <em>field_no</em>, <em>value}</em>, <em>...}</em><big>)</big><a class="headerlink" href="#lua-function.space_object.upsert" title="Permalink to this definition">¶</a></dt>
<dd><p>Update or insert a tuple.</p>
<p>If there is an existing tuple which matches the key fields of <code class="docutils literal"><span class="pre">tuple_value</span></code>, then the
request has the same effect as <a class="reference internal" href="#box-space-update"><span class="std std-ref">space_object:update()</span></a> and the
<code class="docutils literal"><span class="pre">{{operator,</span> <span class="pre">field_no,</span> <span class="pre">value},</span> <span class="pre">...}</span></code> parameter is used.
If there is no existing tuple which matches the key fields of <code class="docutils literal"><span class="pre">tuple_value</span></code>, then the
request has the same effect as <a class="reference internal" href="#box-space-insert"><span class="std std-ref">space_object:insert()</span></a> and the
<code class="docutils literal"><span class="pre">{tuple_value}</span></code> parameter is used. However, unlike <code class="docutils literal"><span class="pre">insert</span></code> or
<code class="docutils literal"><span class="pre">update</span></code>, <code class="docutils literal"><span class="pre">upsert</span></code> will not read a tuple and perform
error checks before returning -- this is a design feature which
enhances throughput but requires more caution on the part of the user.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<code class="samp docutils literal"><em><span class="pre">tuple_value</span></em></code> (type = Lua table or scalar) =
field values, must be passed as a Lua table;
<span class="ccodei">{operator, field_no, value}</span> (type = Lua table) = a group of arguments for each
operation, indicating what the operation is, what field the
operation will apply to, and what value will be applied. The
field number can be negative, meaning the position from the end of
the tuple (#tuple + negative field number + 1).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">null.</td>
</tr>
</tbody>
</table>
<p>Possible errors: it is illegal to modify a primary-key field.
It is illegal to use upsert with a space that has a unique secondary index.</p>
<p><strong>Complexity factors:</strong> Index size, Index type, number of indexes accessed, WAL
settings.</p>
<p><strong>Example:</strong></p>
<blockquote>
<div><div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">upsert</span><span class="p">({</span><span class="mi">12</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">c&#39;</span><span class="p">},</span> <span class="p">{{</span><span class="s1">&#39;</span><span class="s">=&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">a&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;</span><span class="s">=&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">b&#39;</span><span class="p">}})</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<span class="target" id="box-space-delete"></span><dl class="method">
<dt id="lua-function.space_object.delete">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">delete</code><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#lua-function.space_object.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a tuple identified by a primary key.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>
<span class="ccodei">key</span> (type = Lua table or scalar) = key to be matched against the index
key, which may be multi-part.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the deleted tuple</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
<p><strong>Complexity Factors:</strong> Index size, Index type</p>
<p>Note re storage engine: vinyl will return <code class="docutils literal"><span class="pre">nil</span></code>, rather than the deleted tuple.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">delete</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;My</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">tuple&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">delete</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">a&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">error</span><span class="p p-Indicator">:</span> <span class="s">&#39;Supplied</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">type</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">part</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">does</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">index</span><span class="nv"> </span><span class="s">part</span><span class="nv"> </span><span class="s">type:</span>
  <span class="s">expected</span><span class="nv"> </span><span class="s">unsigned&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-id"></span><dl class="data">
<dt id="lua-data.space_object.id">
<em class="property"> </em><code class="descclassname">space_object.</code><code class="descname">id</code><a class="headerlink" href="#lua-data.space_object.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Ordinal space number. Spaces can be referenced by either name or
number. Thus, if space <code class="docutils literal"><span class="pre">tester</span></code> has <code class="docutils literal"><span class="pre">id</span> <span class="pre">=</span> <span class="pre">800</span></code>, then
<code class="docutils literal"><span class="pre">box.space.tester:insert{0}</span></code> and <code class="docutils literal"><span class="pre">box.space[800]:insert{0}</span></code>
are equivalent requests.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">.</span><span class="n">id</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">512</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-enabled"></span><dl class="data">
<dt id="lua-data.space_object.enabled">
<em class="property"> </em><code class="descclassname">space_object.</code><code class="descname">enabled</code><a class="headerlink" href="#lua-data.space_object.enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether or not this space is enabled.
The value is <code class="docutils literal"><span class="pre">false</span></code> if the space has no index.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
</dd></dl>

<span class="target" id="box-space-field-count"></span><dl class="data">
<dt id="lua-data.space_object.field_count">
<em class="property"> </em><code class="descclassname">space_object.</code><code class="descname">field_count</code><a class="headerlink" href="#lua-data.space_object.field_count" title="Permalink to this definition">¶</a></dt>
<dd><p>The required field count for all tuples in this space. The field_count
can be set initially with:</p>
<pre class="highlight literal-block">
box.schema.space.create(..., {
    ... ,
    field_count = <em>field_count_value</em> ,
    ...
})
</pre>
<p>The default value is <code class="docutils literal"><span class="pre">0</span></code>, which means there is no required field count.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">.</span><span class="n">field_count</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="data">
<dt id="lua-data.space_object.index">
<em class="property"> </em><code class="descclassname">space_object.</code><code class="descname">index</code><a class="headerlink" href="#lua-data.space_object.index" title="Permalink to this definition">¶</a></dt>
<dd><p>A container for all defined indexes. There is a Lua object of type
<a class="reference internal" href="box_index.html#box-index"><span class="std std-ref">box.index</span></a> with methods to search tuples and iterate over them in
predefined order.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body">table</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">tarantool</span><span class="o">&gt;</span> <span class="o">#</span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">.</span><span class="n">index</span>
<span class="c1">---</span>
<span class="o">-</span> <span class="mi">1</span>
<span class="o">...</span>
<span class="n">tarantool</span><span class="o">&gt;</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">primary</span><span class="p">.</span><span class="n">type</span>
<span class="c1">---</span>
<span class="o">-</span> <span class="n">TREE</span>
<span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-count"></span><dl class="method">
<dt id="lua-function.space_object.count">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">count</code><big>(</big><span class="optional">[</span><em>key</em><span class="optional">]</span><span class="optional">[</span>, <em>iterator</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-function.space_object.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">key</span> (type = Lua table or scalar) = key to be matched against the primary index
key, which may be multi-part; <span class="ccodei">iterator</span> = comparison method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">Number of tuples.</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">{</span><span class="n">iterator</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">GE&#39;</span><span class="p">})</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-len"></span><dl class="method">
<dt id="lua-function.space_object.len">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">len</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.space_object.len" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">Number of tuples in the space.</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">len</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>Note re storage engine: vinyl does not support <code class="docutils literal"><span class="pre">len()</span></code>.  One possible workaround is to
say <code class="docutils literal"><span class="pre">#select(...)</span></code>.</p>
</dd></dl>

<span class="target" id="box-space-truncate"></span><dl class="method">
<dt id="lua-function.space_object.truncate">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">truncate</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.space_object.truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all tuples. .</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<p><strong>Complexity Factors:</strong> Index size, Index type, Number of tuples accessed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">nil</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that <code class="docutils literal"><span class="pre">truncate</span></code> must be called only by the user who created
the space OR under a <cite>setuid</cite> function created by that user. Read
more about <cite>setuid</cite> functions <a class="reference internal" href="index.html#authentication-funcs"><span class="std std-ref">here</span></a></p>
</div>
<p>Note re storage engine: vinyl does not support <code class="docutils literal"><span class="pre">truncate()</span></code>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">truncate</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">len</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-auto-increment"></span><dl class="method">
<dt id="lua-function.space_object.auto_increment">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">auto_increment</code><big>{</big><em>field-value</em><span class="optional">[</span>, <em>field-value ...</em><span class="optional">]</span><big>}</big><a class="headerlink" href="#lua-function.space_object.auto_increment" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a new tuple using an auto-increment primary key. The space specified
by space_object must have an <code class="docutils literal"><span class="pre">unsigned</span></code> or <code class="docutils literal"><span class="pre">integer</span></code> or <code class="docutils literal"><span class="pre">numeric</span></code> primary key index of type <code class="docutils literal"><span class="pre">TREE</span></code>. The
primary-key field will be incremented before the insert.</p>
<p>Note re storage engine: vinyl does not support <code class="docutils literal"><span class="pre">auto_increment()</span></code>.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>;
<span class="ccodei">field-value(s)</span> (type = Lua table or scalar) = tuple's fields, other than the primary-key field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the inserted tuple.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
<p><strong>Complexity Factors:</strong> Index size, Index type,
Number of indexes accessed, WAL settings.</p>
<p>Possible errors: index has wrong type or primary-key indexed field is not a number.</p>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">auto_increment</span><span class="p">{</span><span class="s1">&#39;</span><span class="s">Fld#1&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">Fld#2&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;Fld#1&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;Fld#2&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">tester</span><span class="p">:</span><span class="n">auto_increment</span><span class="p">{</span><span class="s1">&#39;</span><span class="s">Fld#3&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span> <span class="s">&#39;Fld#3&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-pairs"></span><dl class="method">
<dt id="lua-function.space_object.pairs">
<em class="property"> </em><code class="descclassname">space_object:</code><code class="descname">pairs</code><big>(</big><big>)</big><a class="headerlink" href="#lua-function.space_object.pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function to prepare for iterating over all tuples in a space.</p>
<p>Parameters: <code class="samp docutils literal"><em><span class="pre">space_object</span></em></code> = an <a class="reference internal" href="index.html#index-object-reference"><span class="std std-ref">object reference</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">function which can be used in a for/end loop. Within the loop, a value is returned for each iteration.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">function, tuple</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">box</span><span class="p">.</span><span class="n">schema</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">space33&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="c1">-- index &#39;X&#39; has default parts {1, &#39;unsigned&#39;}</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">create_index</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">X&#39;</span><span class="p">,</span> <span class="p">{})</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">s</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">Hello my &#39;</span><span class="p">},</span> <span class="n">s</span><span class="p">:</span><span class="n">insert</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">Lua world&#39;</span><span class="p">}</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span> <span class="s">&#39;Hello</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="s">&#39;</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;Lua</span><span class="nv"> </span><span class="s">world&#39;</span><span class="p p-Indicator">]</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">tmp</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&#39;</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="n">s</span><span class="p">:</span><span class="nb">pairs</span><span class="p">()</span> <span class="k">do</span>
<span class="gp">         &gt; </span>  <span class="n">tmp</span> <span class="o">=</span> <span class="n">tmp</span> <span class="o">..</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">         &gt; </span><span class="k">end</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">tmp</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Hello my Lua world</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<span class="target" id="box-space-schema"></span><dl class="data">
<dt id="lua-data.box.space._schema">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_schema</code><a class="headerlink" href="#lua-data.box.space._schema" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_schema</span></code> is a system tuple set. Its single tuple contains these fields:
<code class="docutils literal"><span class="pre">'version',</span> <span class="pre">major-version-number,</span> <span class="pre">minor-version-number</span></code>.</p>
<p><strong>Example:</strong></p>
<p>The following function will display all fields in all tuples of <code class="docutils literal"><span class="pre">_schema</span></code>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">example</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">ta</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span>
  <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">_schema</span><span class="p">:</span><span class="nb">pairs</span><span class="p">()</span> <span class="k">do</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&#39;</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="o">#</span><span class="n">v</span> <span class="k">do</span>
      <span class="n">line</span> <span class="o">=</span> <span class="n">line</span> <span class="o">..</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> &#39;</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">end</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="k">return</span> <span class="n">ta</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Here is what <code class="docutils literal"><span class="pre">example()</span></code> returns in a typical installation:</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="s">&#39;cluster</span><span class="nv"> </span><span class="s">1ec4e1f8-8f1b-4304-bb22-6c47ce0cf9c6</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;max_id</span><span class="nv"> </span><span class="s">520</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;version</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">7</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-space"></span><dl class="data">
<dt id="lua-data.box.space._space">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_space</code><a class="headerlink" href="#lua-data.box.space._space" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_space</span></code> is a system tuple set. Its tuples contain these fields: <code class="docutils literal"><span class="pre">id</span></code>,
<code class="docutils literal"><span class="pre">owner</span></code> (= id of user who owns the space),
<code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">engine</span></code>, <code class="docutils literal"><span class="pre">field_count</span></code>,
<code class="docutils literal"><span class="pre">flags</span></code> (e.g. temporary), <code class="docutils literal"><span class="pre">format</span></code>.
These fields are established by <a class="reference internal" href="box_schema.html#box-schema-space-create"><span class="std std-ref">space.create()</span></a>.</p>
<p><strong>Example:</strong></p>
<p>The following function will display all simple fields in all tuples of <code class="docutils literal"><span class="pre">_space</span></code>.</p>
<div class="highlight-lua_tarantool"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">example</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">ta</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span>
  <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">_space</span><span class="p">:</span><span class="nb">pairs</span><span class="p">()</span> <span class="k">do</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&#39;</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="o">#</span><span class="n">v</span> <span class="k">do</span>
      <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">~=</span> <span class="s1">&#39;</span><span class="s">table&#39;</span> <span class="k">then</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span> <span class="o">..</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> &#39;</span>
      <span class="k">end</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">end</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="k">return</span> <span class="n">ta</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Here is what <code class="docutils literal"><span class="pre">example()</span></code> returns in a typical installation:</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="s">&#39;272</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_schema</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;280</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_space</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;281</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_vspace</span><span class="nv"> </span><span class="s">sysview</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;288</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_index</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;296</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_func</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;304</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_user</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;305</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_vuser</span><span class="nv"> </span><span class="s">sysview</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;312</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_priv</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;313</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_vpriv</span><span class="nv"> </span><span class="s">sysview</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;320</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">_cluster</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;512</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">tester</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;513</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">origin</span><span class="nv"> </span><span class="s">vinyl</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;514</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">archive</span><span class="nv"> </span><span class="s">memtx</span><span class="nv"> </span><span class="s">0</span><span class="nv">  </span><span class="s">&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<p>The following requests will create a space using
<code class="docutils literal"><span class="pre">box.schema.space.create</span></code> with a <code class="docutils literal"><span class="pre">format</span></code> clause.
Then it retrieves the _space tuple for the new space.
This illustrates the typical use of the <code class="docutils literal"><span class="pre">format</span></code> clause,
it shows the recommended names and data types for the fields.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">schema</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">TM&#39;</span><span class="p">,</span> <span class="p">{</span>
<span class="gp">         &gt; </span>  <span class="n">id</span> <span class="o">=</span> <span class="mi">12345</span><span class="p">,</span>
<span class="gp">         &gt; </span>  <span class="n">format</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">         &gt; </span>    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{[</span><span class="s2">&quot;</span><span class="s">name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">field_1&quot;</span><span class="p">},</span>
<span class="gp">         &gt; </span>    <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{[</span><span class="s2">&quot;</span><span class="s">type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">unsigned&quot;</span><span class="p">}</span>
<span class="gp">         &gt; </span>  <span class="p">}</span>
<span class="gp">         &gt; </span><span class="p">})</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">index</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[]</span>
  <span class="l l-Scalar l-Scalar-Plain">on_replace</span><span class="p p-Indicator">:</span> <span class="s">&#39;function:</span><span class="nv"> </span><span class="s">0x41c67338&#39;</span>
  <span class="l l-Scalar l-Scalar-Plain">temporary</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">12345</span>
  <span class="l l-Scalar l-Scalar-Plain">engine</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">memtx</span>
  <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">TM</span>
  <span class="l l-Scalar l-Scalar-Plain">field_count</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">created</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">_space</span><span class="p">:</span><span class="nb">select</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="nv">12345</span><span class="p p-Indicator">,</span> <span class="nv">1</span><span class="p p-Indicator">,</span> <span class="s">&#39;TM&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;memtx&#39;</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">{},</span> <span class="p p-Indicator">[{</span><span class="s">&#39;name&#39;</span><span class="p p-Indicator">:</span> <span class="s">&#39;field_1&#39;</span><span class="p p-Indicator">},</span> <span class="p p-Indicator">{</span><span class="s">&#39;type&#39;</span><span class="p p-Indicator">:</span> <span class="s">&#39;unsigned&#39;</span><span class="p p-Indicator">}]]</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-index"></span><dl class="data">
<dt id="lua-data.box.space._index">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_index</code><a class="headerlink" href="#lua-data.box.space._index" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_index</span></code> is a system tuple set. Its tuples contain these fields:
<code class="docutils literal"><span class="pre">id</span></code> (= id of space), <code class="docutils literal"><span class="pre">iid</span></code> (= index number within space),
<code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">type</span></code>, <code class="docutils literal"><span class="pre">opts</span></code> (e.g. unique option),
[<code class="docutils literal"><span class="pre">tuple-field-no</span></code>, <code class="docutils literal"><span class="pre">tuple-field-type</span></code> ...].</p>
<p>The following function will display all fields in all tuples of <code class="docutils literal"><span class="pre">_index</span></code>:
(notice that the fifth field gets special treatment as a map value and
the sixth or later fields get special treatment as arrays):</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">example</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">ta</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">value</span>
  <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">_index</span><span class="p">:</span><span class="nb">pairs</span><span class="p">()</span> <span class="k">do</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&#39;</span>
     <span class="k">while</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">do</span>
      <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="k">then</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">end</span>
      <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">5</span> <span class="k">then</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">unique</span> <span class="o">==</span> <span class="kc">true</span> <span class="k">then</span>
          <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">true&#39;</span>
          <span class="k">end</span>
        <span class="k">end</span>
      <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="k">then</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> &#39;</span> <span class="o">..</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">end</span>
      <span class="n">line</span> <span class="o">=</span> <span class="n">line</span> <span class="o">..</span> <span class="n">value</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> &#39;</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">end</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">return</span> <span class="n">ta</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Here is what <code class="docutils literal"><span class="pre">example()</span></code> returns in a typical installation:</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="s">&#39;272</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;280</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;280</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;280</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;281</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;281</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;281</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;288</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;288</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;289</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;289</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;296</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;296</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;296</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;297</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;297</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;297</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;304</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;304</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;304</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;305</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;305</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;305</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;312</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;312</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;312</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">object</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;313</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;313</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">owner</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;313</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">object</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;320</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;320</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">uuid</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">str</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;512</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;513</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">num</span><span class="nv"> </span><span class="s">&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;516</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">primary</span><span class="nv"> </span><span class="s">tree</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">STR</span><span class="nv"> </span><span class="s">&#39;</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="box-space-user"></span><dl class="data">
<dt id="lua-data.box.space._user">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_user</code><a class="headerlink" href="#lua-data.box.space._user" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_user</span></code> is a system tuple set for
support of the <a class="reference internal" href="index.html#authentication"><span class="std std-ref">authorization feature</span></a>.</p>
</dd></dl>

<span class="target" id="box-space-priv"></span><dl class="data">
<dt id="lua-data.box.space._priv">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_priv</code><a class="headerlink" href="#lua-data.box.space._priv" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_priv</span></code> is a system tuple set for
support of the <a class="reference internal" href="index.html#authentication"><span class="std std-ref">authorization feature</span></a>.</p>
</dd></dl>

<span class="target" id="box-space-cluster"></span><dl class="data">
<dt id="lua-data.box.space._cluster">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_cluster</code><a class="headerlink" href="#lua-data.box.space._cluster" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_cluster</span></code> is a system tuple set
for support of the <a class="reference internal" href="../administration.html#index-box-replication"><span class="std std-ref">replication feature</span></a>.</p>
</dd></dl>

<span class="target" id="box-space-func"></span><dl class="data">
<dt id="lua-data.box.space._func">
<em class="property"> </em><code class="descclassname">box.space.</code><code class="descname">_func</code><a class="headerlink" href="#lua-data.box.space._func" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">_func</span></code> is a system tuple set
with function tuples made by <a class="reference internal" href="box_schema.html#box-schema-func-create"><span class="std std-ref">box.schema.func.create</span></a>.</p>
</dd></dl>

<div class="section" id="example-use-box-space-functions-to-read-space-tuples">
<h2>1.1.2.1. Example: use box.space functions to read _space tuples<a class="headerlink" href="#example-use-box-space-functions-to-read-space-tuples" title="Permalink to this headline">¶</a></h2>
<p>This function will illustrate how to look at all the spaces, and for each
display: approximately how many tuples it contains, and the first field of
its first tuple. The function uses Tarantool <code class="docutils literal"><span class="pre">box.space</span></code> functions <code class="docutils literal"><span class="pre">len()</span></code>
and <code class="docutils literal"><span class="pre">pairs()</span></code>. The iteration through the spaces is coded as a scan of the
<code class="docutils literal"><span class="pre">_space</span></code> system tuple set, which contains metadata. The third field in
<code class="docutils literal"><span class="pre">_space</span></code> contains the space name, so the key instruction
<code class="docutils literal"><span class="pre">space_name</span> <span class="pre">=</span> <span class="pre">v[3]</span></code> means <code class="docutils literal"><span class="pre">space_name</span></code> is the <code class="docutils literal"><span class="pre">space_name</span></code> field in
the tuple of <code class="docutils literal"><span class="pre">_space</span></code> that we've just fetched with <code class="docutils literal"><span class="pre">pairs()</span></code>. The function
returns a table:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">example</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">tuple_count</span><span class="p">,</span> <span class="n">space_name</span><span class="p">,</span> <span class="n">line</span>
  <span class="kd">local</span> <span class="n">ta</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">.</span><span class="n">_space</span><span class="p">:</span><span class="nb">pairs</span><span class="p">()</span> <span class="k">do</span>
    <span class="n">space_name</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">[</span><span class="n">space_name</span><span class="p">].</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">then</span>
      <span class="n">tuple_count</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">1 or more&#39;</span>
    <span class="k">else</span>
      <span class="n">tuple_count</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">0&#39;</span>
    <span class="k">end</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">space_name</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> tuple_count =&#39;</span> <span class="o">..</span> <span class="n">tuple_count</span>
    <span class="k">if</span> <span class="n">tuple_count</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">1 or more&#39;</span> <span class="k">then</span>
      <span class="k">for</span> <span class="n">k1</span><span class="p">,</span> <span class="n">v1</span> <span class="k">in</span> <span class="n">box</span><span class="p">.</span><span class="n">space</span><span class="p">[</span><span class="n">space_name</span><span class="p">]:</span><span class="nb">pairs</span><span class="p">()</span> <span class="k">do</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s">. first field in first tuple = &#39;</span> <span class="o">..</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">break</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="k">return</span> <span class="n">ta</span>
<span class="k">end</span>
</pre></div>
</div>
<p>And here is what happens when one invokes the function:</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_schema tuple_count =1 or more. first field in first tuple = cluster</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_space tuple_count =1 or more. first field in first tuple = 272</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_vspace tuple_count =1 or more. first field in first tuple = 272</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_index tuple_count =1 or more. first field in first tuple = 272</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_vindex tuple_count =1 or more. first field in first tuple = 272</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_func tuple_count =1 or more. first field in first tuple = 1</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_vfunc tuple_count =1 or more. first field in first tuple = 1</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_user tuple_count =1 or more. first field in first tuple = 0</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_vuser tuple_count =1 or more. first field in first tuple = 0</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_priv tuple_count =1 or more. first field in first tuple = 1</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_vpriv tuple_count =1 or more. first field in first tuple = 1</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_cluster tuple_count =1 or more. first field in first tuple = 1</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="example-use-box-space-functions-to-organize-a-space-tuple">
<h2>1.1.2.2. Example: use box.space functions to organize a _space tuple<a class="headerlink" href="#example-use-box-space-functions-to-organize-a-space-tuple" title="Permalink to this headline">¶</a></h2>
<p>The objective is to display field names and field types of a system space --
using metadata to find metadata.</p>
<p>To begin: how can one select the _space tuple that describes _space?</p>
<p>A simple way is to look at the constants in box.schema,
which tell us that there is an item named SPACE_ID == 288,
so these statements will retrieve the correct tuple: <br />
<span class="ccode">box.space._space:select{288}</span> <br />
or <br />
<span class="ccode">box.space._space:select{box.schema.SPACE_ID}</span> <br /></p>
<p>Another way is to look at the tuples in box.space._index,
which tell us that there is a secondary index named 'name' for space
number 288, so this statement also will retrieve the correct tuple: <br />
<span class="ccode">box.space._space.index.name:select{'_space'}</span></p>
<p>However, the retrieved tuple is not easy to read: <br />
<span class="ccode">tarantool&gt;</span> <span class="ccodeb">box.space._space.index.name:select{'_space'}</span> <br />
<span class="ccode">---</span> <br />
<span class="ccode">- - [280, 1, '_space', 'memtx', 0, '', [{'name': 'id',</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">'type': 'num'}, {'name': 'owner','type': 'num'},</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">{'name': 'name','type': 'str'}, {'name': 'engine',</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">'type': 'str'},{'name': 'field_count', 'type': 'num'},</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">{'name': 'flags','type': 'str'}, {'name': 'format',</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">'type': '*'}]]</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">...</span></p>
<p>It looks disorganized because field number 7
has been formatted with recommended names and data types.
How can one get those specific sub-fields?
Since it's visible that field number 7 is an array of maps,
this <cite>for</cite> loop will do the organizing: <br />
<span class="ccode">local tuple_of_space, field_name, field_type</span> <br />
<span class="ccode">tuple_of_space = box.space._space.index.name:select{'_space'}[1]</span> <br />
<span class="ccode">for i = 1, #tuple_of_space[7], 1</span> <br />
<span class="ccode">do</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">field_name = tuple_of_space[7][i]['name']</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">field_type = tuple_of_space[7][i]['type']</span> <br />
&nbsp; &nbsp; &nbsp; <span class="ccode">print(field_name .. ',' ..field_type)</span> <br />
<span class="ccode">end</span></p>
<p>And here is what happens when one executes the <cite>for</cite> loop: <br />
<span class="ccode">id,num</span> <br />
<span class="ccode">owner,num</span> <br />
<span class="ccode">name,str</span> <br />
<span class="ccode">engine,str</span> <br />
<span class="ccode">field_count,num</span> <br />
<span class="ccode">flags,str</span> <br />
<span class="ccode">format,*</span></p>
</div>
</div>


          
          
  <div id="disqus_thread"></div>
  <script>
    // DON'T EDIT
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//tarantooldb.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
      comments powered by Disqus.
    </a>
  </noscript>

          
  
    
      <div class="b-page_over-tail">
    
    
      <div class="b-page_over-prev">
        <a href="box_schema.html"
           class="b-prev b-ellipsis"
           title="1.1.1. Submodule &lt;cite&gt;box.schema&lt;/cite&gt;">1.1.1. Submodule <cite>box.schema</cite></a>
      </div>
    
    <div class="b-page_over-lang">
      <ul class="b-page_over-lang-list">
        <li class="b-page_over-lang-item">
          <a href="../../_sources/book/box/box_space.txt"
             class="b-page_over-lang-url"> Source </a>
        </li>
      </ul>
    </div>
    
      <div class="b-page_over-next">
        <a href="box_index.html"
           class="b-next b-ellipsis"
           title="1.1.3. Submodule &lt;cite&gt;box.index&lt;/cite&gt;">1.1.3. Submodule <cite>box.index</cite></a>
      </div>
    
    </div>
  
</div>
      </div>
    </div>
  

      </div>
    </div>

  <!-- FOOTER > -->
  
<footer class="b-footer">
  <div class="b-footer-wrapper">
    <nav class="b-footer_menu">
      
  <ul class="b-menu">
    
      <li class="b-menu-item">
        <a href="/" class="b-menu-item-url">Overview</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/doc/" class="b-menu-item-url">Documentation</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/download.html" class="b-menu-item-url">Download</a>
      </li>
    
      <li class="b-menu-item">
        <a href="/careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      <li class="b-menu-item">
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      <div class="b-footer-other">
        <a href="http://15.tarantool.org">1.5 web site and downloads</a>
      </div>
    </nav>
  </div>
</footer>

  <!-- < FOOTER -->
  <div id="mobile-checker"></div>
  </body>
</html>

